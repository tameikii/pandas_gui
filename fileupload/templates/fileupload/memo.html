<div class="container">
    <h3>テーブル</h3>
    <div class="container">
    <div class = table-responsive>
    <div style="overflow-y:scroll; overflow-x:scroll; scrollbar-base-color:#99ff66 ; scrollbar-arrow-color:#ff0000;">
        <div class="row">
        <table class="table table-striped table-bordered table-hover">    
        
                    <tr>
                        <td>index</td>
                        {% for column, item in df.iteritems %}
                            <th>{{ column }}</th>
                        {% endfor %}
                    </tr>
                    
                    {% for index, rows in df.iterrows %}
                        <tr>
                            <th>{{ index }}</th>
                            {% for row in rows %}
                                <td>{{ row }}</td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
        </table>
        </div>
    </div>
    </div>
    </div>
<script>
    $('#sortable').sortable({
        //updateで並べ替えるたびに更新
        update: function(){
            $("#log").text($('#sortable').sortable("toArray"));

        }
    });
    $('#sortable').disableSelection();
    $('#sortable').bind('sortstop', function (e, ui) {
        // ソートが完了したら実行される。
        var rows = $('#sortable .rank');
        for (var i = 0, rowTotal = rows.length; i < rowTotal; i += 1) {
            $($('.rank')[i]).text(i + 1);
        }
    })
</script>
</body>
<html>





    {% load static %}
    <!DOCTYPE html>
    <html lang='ja'>
    <head>
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <script src="{% static '/js/jquery-3.5.0.min.js' %}"></script>
      <script src="{% static '/js/bootstrap.bundle.min.js' %}"></script>
      <script src="http://code.jquery.com/ui/1.11.3/jquery-ui.js"></script>
      <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
      <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
      <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
      <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
      <link rel="stylesheet" href="{% static '/css/bootstrap.min.css' %}">
      <!--Pyscriptのインストール-->
      <!--python の外部ライブラリ-->
            <head>
                    <title>テストアプリ</title>
            </head>
            <body>
    
                <h2>データフレーム編集</h2>
                <br>
                <br>
    
                <!-- 各インスタンス属性の要素を取得 -->
                <p>アップロード日：{{ file_value.uploaded_at }}</p>
                <p>トップページへ：<a href="{% url 'fileupload:index' %}">戻る</a></p>
                <p>詳細ページへ：<a href="{% url 'fileupload:detail' pk=file_value.id %}">戻る</a></p>
                <form action="{% url 'fileupload:edit' pk=file_value.id %}" method = 'POST'>
                    {% csrf_token %}
                    <input type="hidden" name = 'update_filename' value="{{file_value.upload_dir.path}}">
                    <button type='submit', name ='btn_n'>更新</button>
                </form>
                <form action="{% url 'fileupload:edit' pk=file_value.id %}" method = 'POST'>
                    {% csrf_token %}
                <br><br>
                    <b>ファイル名</b>
                    {{form.file_name}}.csv
                    <br>
                    {% if error_message is not None %}
                    <b class='input_form_error'></b><br><br>
                    {% endif %}
                    <button type='submit', name='btn_t'>新しく保存</button>
                </form>
                <br>
                <!--htmlを埋め込むためのコード-->
                <iframe src="{{profile}}">
                <py-env>
                    - pandas
                    - numpy
                  </py-env>
                  <py-button id="graph-button" label="グラフを表示"></py-button>
                  <div id="graph-container"></div>
                <py-script >
    import numpy as np
    import pandas as pd
    print(type({{profile}}))
    
    
                </py-script>
                <!-- 読み込んだCSVファイルをテーブル形式で表示 -->
                <div class="container">
                <h3>テーブル</h3>
                <div class="container">
                <div style="overflow-y:scroll; overflow-x:scroll; scrollbar-base-color:#99ff66 ; scrollbar-arrow-color:#ff0000;">
                    <div class="row">
                    <table class="table table-striped table-bordered table-hover">    
                    
                                <tr>
                                    <td>index</td>
                                    {% for column, item in df.iteritems %}
                                        <th>{{ column }}</th>
                                    {% endfor %}
                                </tr>
                                <tbody id="sortable">
                                {% for index, rows in df.iterrows %}
                                    <tr>
                                        <th>{{ index }}</th>
                                        {% for row in rows %}
                                            <td>{{ row }}</td>
                                        {% endfor %}
                                    </tr>
                                    {% endfor %}
                                </tbody>
                    </table>
                    </div>
                </div>
                </div>
                </div>
            <script>
                $('#sortable').sortable({
                    //updateで並べ替えるたびに更新
                    update: function(){
                        $("#log").text($('#sortable').sortable("toArray"));
    
                    }
                });
                $('#sortable').disableSelection();
                $('#sortable').bind('sortstop', function (e, ui) {
                    // ソートが完了したら実行される。
                    var rows = $('#sortable .rank');
                    for (var i = 0, rowTotal = rows.length; i < rowTotal; i += 1) {
                        $($('.rank')[i]).text(i + 1);
                    }
                })
            </script>
            </body>
    <html>


        <body class="h-100">
            <header class="w-100 d-flex justify-content-between align-items-center bg-light px-3">
                <!— ヘッダーの内容 -->
                <h1 class="mx-2 fs-4 text-primary fw-bold">OFFICE54</h1>
                <ul class="navbar-nav d-flex flex-row">
                    <li class="nav-item mx-3 text-muted active"><a href="#" class="nav-link text-secondary">New</a></li>
                    <li class="nav-item mx-3 text-muted"><a href="#" class="nav-link text-secondary">Login</a></li>
                </ul>
            </header>
            <div class="d-flex flex-row w-100" style="height: calc(100% - 50px)">
                <nav class ="bg-dark">
                    <ul class="nav flex-column m-0 p-3">
                        <li class="nav-item mb-2"><a href="{% url 'fileupload:index' %}" class="nav-link">トップページへ</a></li>
                        <li class="nav-item mb-2"><a href="{{ file_value.upload_dir.url }}" class="nav-link">ダウンロード</a></li>
                        <li class="nav-item mb-2"><a href="{% url 'fileupload:delete' pk=file_value.id %}" class="nav-link">削除</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link">アップロード日：{{ file_value.uploaded_at }}</a></li>
                    </ul>
                 </nav>
                <!— メインコンテンツ -->
                <main class="w-100 bg-light">
                    <!— タイトルバー -->
                    <div class="border shadow-sm d-flex flex-row align-items-center bg-light">
                        <div class="navbar-brand toggle-menu">
                            <button class="btn btn-light btn-sm" id="toggle"><i class="fas fa-bars fa-lg"></i></button>
                        </div>
                        <div class="fs-4 fw-bold">Dashboard</div>
                    </div>
                    <!— コンテンツ -->
                    <div class="p-3">
                        <div class="d-flex flex-row">
                            <h1 id = "title" class = "text-5xl"></h1>
                            <py-script>
title = 'CSVファイルの編集'
pyscript.write('title', title)
                            </py-script>
                            <br>
                            <div class="container">
                                <h3>テーブル</h3>
                                <div class="container">
                                <div style="overflow-y:scroll; overflow-x:scroll; scrollbar-base-color:#99ff66 ; scrollbar-arrow-color:#ff0000;">
                                    <div class="row">
                                    <table class="table table-striped table-bordered table-hover">    
                                    
                                                <tr>
                                                    <td>index</td>
                                                    {% for column, item in df.iteritems %}<th>{{ column }}</th>{% endfor %}
                                                </tr>
                                                <tbody id="sortable">
                                                {% for index, rows in df.iterrows %}
                                                    <tr>
                                                        <th>{{ index }}</th>
                                                        {% for row in rows %}<td>{{ row }}</td>{% endfor %}
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                    </table>
                                    </div>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </body>






                        <div class="p-3">
                    <div class="d-flex flex-row">
                        <br>
                         <!-- 読み込んだCSVファイルをテーブル形式で表示 -->
                        <div class="container">
                            <div class="container">
                                <div style="overflow-y:scroll; overflow-x:scroll; scrollbar-base-color:#99ff66 ; scrollbar-arrow-color:#ff0000;">
                                <div class="row">
                                <table class="table table-striped table-bordered table-hover table-wid">    
                                
                                            <tr>
                                                <th style="text-align: center"  >index</th>
                                                {% for column, item in df.iteritems %}
                                                <th style="text-align: center">{{ column }}</th>
                                                {% endfor %}
                                            </tr>
                                            <tbody id="sortable">
                                            {% for index, rows in df.iterrows %}
                                                {% if index <= 10 %}
                                                <tr>
                                                    <th style="text-align: center" >{{ index }}</th>
                                                    {% for row in rows %}<td>{{ row }}</td>{% endfor %}
                                                </tr>
                                                {% else %}
                                                <tr class="readOnlyRow">
                                                    <th style="text-align: center" >{{ index }}</th>
                                                    {% for row in rows %}<td>{{ row }}</td>{% endfor %}
                                                </tr>
                                                {% endif %}
                                            {% endfor %}
                                            </tbody>
                                </table>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>



                    <table class="table table-striped table-bordered table-hover table-wid">    
                        <tr>
                            <th style="text-align: center"  >index</th>
                            {% for column, item in df.iteritems %}
                            <th style="text-align: center" >{{ column }}</th>
                            {% endfor %}
                        </tr>
                        <tbody id="sortable">
                        {% for index, rows in df.iterrows %}
                            {% if index <= 10 %}
                            <tr>
                                <th style="text-align: center" >{{ index }}</th>
                                {% for row in rows %}<td>{{ row }}</td>{% endfor %}
                            </tr>
                            {% else %}
                            <tr class="readOnlyRow">
                                <th style="text-align: center" >{{ index }}</th>
                                {% for row in rows %}<td>{{ row }}</td>{% endfor %}
                            </tr>
                            {% endif %}
                        {% endfor %}
                        </tbody>
                    </table>
            


                    <script>
                        document.getElementById("log-python-variables").addEventListener("click", () => {
                          const df_columns = pyodideGlobals.get('df_columns')
                          for (const column of df_columns){
                            console.log(column);
                          }
                          const df_list = pyodideGlobals.get('df_list')
                          for (const element of df_list){
                              for (const row of element)
                                  console.log(row)
                            }
                          const len_df = pyodideGlobals.get('len_df')
                          const len_columns = pyodideGlobals.get('len_columns')
                          console.log(len_df);
                          console.log(len_columns);
                        });
                      </script>


            

                      <script>
                        document.getElementById("log-python-variables").addEventListener("click", () => {
                            //datatableの作成
                            const df_list = pyodideGlobals.get('df_list')
                            var table = document.createElement('table');
                            table.classList.add("table", "table-striped", "table-bordered", "table-hover", "table-wid","table-responsive")
                            var tr = document.createElement('tr');
                            const df_columns = pyodideGlobals.get("df_columns")
                            for (const column of df_columns){
                                console.log(column)
                                var th = document.createElement('th');
                                th.textContent = column;
                                tr.appendChild(th);
                            }
                            table.appendChild(tr);
                            const len_df = pyodideGlobals.get('len_df')
                            const len_columns = pyodideGlobals.get('len_columns')
                            var count = 0
                            var tbody = document.createElement('tbody');
                            tbody.setAttribute('id', 'sortable');
                            table.appendChild(tbody);
                            for (const element of df_list){
                                var tr = document.createElement('tr');
                                if(count <= 9){
                                    for (const row of element){
                                        var td = document.createElement('td');
                                        td.textContent = row;
                                        //console.log(td)
                                        console.log(row)
                                        tr.appendChild(td);
                                    }
                                }
                                else{
                                    tr.classList.add("readOnlyRow");
                                    for (const row of element){
                                        var td = document.createElement('td');
                                        td.textContent = row;
                                        tr.appendChild(td);
                                    }
                                }
                                count += 1;
                                table.appendChild(tr);   
                            }
                         
                            document.getElementById('datatable').appendChild(table)
                        });
                        </script>

                        df_tolist




                        {% load static %}
                        <!DOCTYPE html>
                        <html lang='ja', class = 'h-100'>
                            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
                            <!--Bootstrapの読み込み-->
                            <link rel="stylesheet" href="{% static '/css/bootstrap.min.css' %}">
                            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
                            <!--staticのcssファイルの読み込み-->
                           <!--<link rel="stylesheet" href="{% static '/css/detail.css' %}">-->
                            <!--JQueryの読み込み-->
                            <script src="http://code.jquery.com/ui/1.11.3/jquery-ui.js"></script>
                            <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
                            <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
                            <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
                            <!--Pysctiptのcssの読み込み-->
                            <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
                            <!--Pysctiptのjsライブラリーを取り込み-->
                            <script defer src="https://pyscript.net/latest/pyscript.js"></script>
                        
                            <head>
                                    <title>pandas_GUIもどき</title>
                                    <style media="screen">
                                        header{
                                            height: 50px;
                                            box-shadow: 0px 0px 5px 0px hsla(0, 0%, 7%, 0.3);
                                        }
                                        nav {
                                            width: 230px;
                                        }
                                        .nav-link {
                                            color: white;
                                            background-color: rgba(255, 255, 255, 0.493);
                                        }
                                        main {
                                            transition: 0.3s all ease;
                                        }
                                        .prime_button{
                                            border: none;
                                            out_line: none;
                                        }
                                        
                                    </style>
                            </head>
                            <py-env>
                                - pandas
                                - numpy
                            </py-env>
                        
                            <body>
                                <header class="w-100 d-flex justify-content-between align-items-center bg-light px-3">
                                    <!— ヘッダーの内容 -->
                                    <h1 class="mx-2 fs-4 text-primary fw-bold">DataFrameの編集</h1>
                        
                                    <ul class="navbar-nav d-flex flex-row">
                                        <li class="nav-item mx-3 text-muted active"><a href="#" class="nav-link text-secondary">New</a></li>
                                        <li class="nav-item mx-3 text-muted"><a href="#" class="nav-link text-secondary">Save</a></li>
                                        <li class="nav-item mx-3 text-muted">
                                            <form method="POST">
                                                {% csrf_token %}
                                                <button class="prime_button nav-link text-secondary" type="submit" name="btn_prime">初期化                            
                                                </button></li>
                                    </ul>
                                </header>
                                <div class="d-flex flex-row w-100" style="height: calc(100% - 50px)">
                                    <!--　サイドメニュ　ー-->
                                    <nav class ="bg-dark">
                                        <ul class="nav flex-column m-0 p-3">
                                            <li class="nav-item mb-2"><a href="{% url 'fileupload:index' %}" class="nav-link">トップへ</a></li>
                                            <li class="nav-item mb-2"><a href="{{ file_value.upload_dir.url }}" class="nav-link">download</a></li>
                                            <li class="nav-item mb-2"><a href="{% url 'fileupload:delete' pk=file_value.id %}" class="nav-link">deleate</a></li>
                                        </ul>
                                     </nav>
                                    <!-- メインコンテンツ -->
                                    <main class="w-100 bg-light">
                                        <!-- 編集ボタン -->
                                        <div class="bg-light border shadow-sm d-flex flex-row align-items-center">
                                            <div class="navbar-brand toggle-menu">
                                                <button class="btn btn-light btn-sm" id="toggle"><i class="fas fa-bars fa-lg btn btn-dark">メニュー</i></button>
                                                <button class="btn btn-light bnt-sm" id="readOnlyRowsToggle"><i class="fas fa-bars fa-lg btn btn-dark">全て表示</i></button>
                                                <button class="btn bnt-light bnt-sm" id = "info-button"><i class="fas fa-bars fa-lg btn btn-dark">df-info</i></button>
                                                <button class="btn bnt-light bnt-sm" id = "describe-button"><i class="fas fa-bars fa-lg btn btn-dark">df-describe</i></button> 
                                            </div>
                                        </div>
                                        <!-- コンテンツ --> 
                                        <div class="p-3">
                                            <div class = "container">
                                                <div class="ratio ratio-16x9">
                                                <iframe src= "{% url 'fileupload:profile' %}" title="DataProfiling" allowfullscreen sandbox scrolling=”auto”></iframe>
                                                </div>
                                            </div>
                                            <br>
                                            <div class="d-flex flex-row">
                                                <br>
                                                <div class = "container">
                                                    <div style="overflow-y:scroll; overflow-x:scroll; scrollbar-base-color:#99ff66 ; scrollbar-arrow-color:#ff0000;">
                                                    <div class="row">
                                                        <table class="table table-striped table-bordered table-hover table-wid" id="dataframe">    
                                                            <tr>
                                                                <th style="text-align: center"  ></th>
                                                                {% for column, item in df.iteritems %}
                                                                <th style="text-align: center">{{ column }}</th>
                                                                {% endfor %}
                                                            </tr>
                                                            <tbody id="sortable">
                                                            {% for index, rows in df.iterrows %}
                                                                {% if index <= 10 %}
                                                                <tr>
                                                                    <th style="text-align: center" >{{ index }}</th>
                                                                    {% for row in rows %}<td>{{ row }}</td>{% endfor %}
                                                                </tr>
                                                                {% else %}
                                                                <tr class="readOnlyRow">
                                                                    <th style="text-align: center" >{{ index }}</th>
                                                                    {% for row in rows %}<td>{{ row }}</td>{% endfor %}
                                                                </tr>
                                                                {% endif %}
                                                            {% endfor %}
                                                            </tbody>
                                                        </table>
                                                    </div>    
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="d-flex flex-row">
                                                    <div id="data-info"></div>
                                                    <div id="data-describe"></div>
                                            </div>
                                        </div>
                                    </main>
                                </div>
                            </body>
                        
                            <script type="text/javascript">
                                //columnsの先頭が空白なことに注意
                                flag = 0
                                table_columns = new Array()
                                table_data = new Array()
                                table = document.getElementById('dataframe')
                                for (let row of table.rows) {
                                    if(flag == 0){
                                        for(let cell of row.cells){
                                            table_columns.push(cell.innerText)
                                         }
                                         flag = 1
                                    }
                                    else{
                                        df_rows = new Array()
                                        for(let cell of row.cells){
                                           df_rows.push(cell.innerText)
                                        }
                                        table_data.push(df_rows)
                                    }
                                }
                                length_table = table_data.length
                                length_columns = table_columns.length
                            </script>
                            <script type="text/javascript">
                                window.onload = () => {
                                    // toggleボタン
                                    let sidemenuToggle = document.getElementById('toggle')
                                    // メインコンテンツを囲むmain要素
                                    let page = document.getElementsByTagName('main')[0];
                                    // 表示状態 trueで表示中 falseで非表示
                                    let sidemenuStatus = true;
                                    // ボタンクリック時のイベント
                                    sidemenuToggle.addEventListener('click', () => {
                                        // 表示状態を判定
                                        if(sidemenuStatus){
                                            page.style.cssText = 'margin-left: -230px'
                                            sidemenuStatus = false;
                                        }else{
                                            page.style.cssText = 'margin-left: 0px'
                                            sidemenuStatus = true;
                                        }
                                    })
                                }
                            </script>
                            <!--表をドラックで並び替えるようにするコード-->
                            <script>
                                $('#sortable').sortable({
                                    //updateで並べ替えるたびに更新
                                    update: function(){
                                        $("#log").text($('#sortable').sortable("toArray"))
                                    }
                                });
                                $('#sortable').disableSelection();
                                $('#sortable').bind('sortstop', function (e, ui) {
                                    // ソートが完了したら実行される。
                                    var rows = $('#sortable .rank');
                                    for (var i = 0, rowTotal = rows.length; i < rowTotal; i += 1) {
                                        $($('.rank')[i]).text(i + 1);
                                    }
                                })
                            </script>
                            <script  type="text/javascript">
                                //javascript
                                $(document).ready(function() {
                                    $(".readOnlyRow").hide();
                                    $("#readOnlyRowsToggle").click(function() {
                                     var elem = $(".readOnlyRow")[0];
                                     if(elem.style.display == 'none')
                                      $(".readOnlyRow").show();
                                     else
                                      $(".readOnlyRow").hide();
                                    });
                                   });
                            </script>
                            <script src="{% static '/js/jquery-3.6.1.min.js' %}"></script>
                            <script src="{% static '/js/bootstrap.bundle.min.js' %}"></script> 
                             <!--info button-->
                            
                        
                             <script type="text/javascript">
                                //表示ボタンの２度押しを防止する処理]
                                const info = document.getElementById("info-button")
                                info.addEventListener("click", () => {
                                    info.disabled = true;
                                    //console.log(`${diplay_info}`);
                                });
                                   
                                const describe = document.getElementById("describe-button")
                                describe.addEventListener("click", () => {
                                    describe.disabled = true;
                                    //console.log(`${diplay_describe}`);
                                });
                            </script>
                            <!--読み込みを行う順番の関係-->
                            <script>
                        
                                //pyscriptとjavascriptで変数を共有するための関数
                                function createObject(object, variableName){
                                    //Bind a variable whose name is the string variableName
                                    // to the object called 'object'
                                    let execString = variableName + " = object"
                                    console.log("Running `" + execString + "`");
                                    eval(execString)
                                }
                            </script>
                            <py-script>
                        import pandas as pd
                        import numpy as np
                        import io
                        from js import createObject, table_data, table_columns,length_table, length_columns
                        from pyodide.ffi import create_proxy
                        createObject(create_proxy(globals()), "pyodideGlobals")
                        
                        #dataFrameを作成するための処理
                        
                        df_types  = list()
                        {% for type in df_type_list %}
                        df_types.append("{{type}}")
                        {% endfor %}
                        
                        dataframe = np.array([[table_data[i][j] for j in range(int(length_columns))] for i in range(length_table)])
                        df = pd.DataFrame(dataframe,columns=table_columns)
                        df = df[df.columns[1:]]
                        df_prime = df
                        dtype_dict = {key: val for key, val in zip(df.columns, df_types)}
                        df = df.astype(dtype_dict)
                        
                        
                        #df.info()を表示するための処理[デフォルトの返り値がNone]
                        #bufferにパイプ処理することで変数に格納
                        info_button = Element('info-button')
                        def display_data_info(*ags, **kwgs):
                            buffer = io.StringIO()
                            df.info(buf=buffer)
                            df_info = buffer.getvalue().split("\n")
                            df_info = pd.DataFrame(df_info[:-1],columns=["df-info"])
                            pyscript.write('data-info',df_info)
                        
                        #df.describe()を表示するための処理[describeの出力はDataFrame型]
                        describe_button = Element('describe-button')
                        def display_data_describe(*ags, **kwgs):
                            pyscript.write('data-describe',df.describe(include="all"))
                        
                        
                        info_button.element.onclick = display_data_info
                        describe_button.element.onclick = display_data_describe
                        
                        
                        
                            </py-script>
                        </html>
    


                        <div class="bg-light border shadow-sm d-flex flex-row align-items-center">
                            <div class="navbar-brand toggle-menu">
                                <button class="btn btn-light btn-sm" id="toggle"><i class="fas fa-bars fa-lg btn btn-dark">メニュー</i></button>
                                <button class="btn btn-light bnt-sm" id="readOnlyRowsToggle"><i class="fas fa-bars fa-lg btn btn-dark">全て表示</i></button>
                                <button class="btn bnt-light bnt-sm" id = "readOnlyRowsToggle_info"><i class="fas fa-bars fa-lg btn btn-dark">df-info</i></button>
                                <button class="btn bnt-light bnt-sm" id = "describe-button"><i class="fas fa-bars fa-lg btn btn-dark">df-describe</i></button> 
                            </div>
                        </div>
                        <!doctype html>
                        <html>
                                <head>
                                        <title>テストアプリ</title>
                                </head>
                                <body>
                                    <form method="post">{% csrf_token %}
                                        <p>削除すると復旧できませんが、よろしいですか？</p>
                                        <input type="submit" value="削除">
                                    </form>
                                </body>
                        </html>
                        <form method="POST">
                            {% csrf_token %}
                            <button class="prime_button nav-link text-secondary" type="submit" name="btn_prime">初期化                            
                            </button></li>
                        </form>



                        <div class="navbar navbar-expand-lg bg-light">
                            <div class="container-fluid">
                              <a class="navbar-brand" href="#">Navbar</a>
                              <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvas" aria-controls="offcanvas">
                                <span class="navbar-toggler-icon"></span>
                              </button>
                          
                              <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvas" aria-labelledby="offcanvasLabel">
                                <div class="offcanvas-header">
                                  <h5 class="offcanvas-title">Menu</h5>
                                  <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                                </div>
                                <div class="offcanvas-body">
                                  <ul class="navbar-nav">
                                    <li class="nav-item"><a href="#" class="nav-link">hoge</a></li>
                                    <li class="nav-item"><a href="#" class="nav-link">hoge</a></li>
                                    <li class="nav-item"><a href="#" class="nav-link">hoge</a></li>
                                  </ul>
                                </div>
                              </div>
                            </div>
                          </div>
                          
                          <h1 class="my-5 text-center">ほげ</h1>


                          <py-script>
                            import pandas as pd
                            import numpy as np
                            from js import createObject, table_data, table_columns,length_table, length_columns
                            from pyodide.ffi import create_proxy
                            createObject(create_proxy(globals()), "pyodideGlobals")
                            
                            #dataFrameを作成するための処理
                            
                            df_types  = list()
                            {% for type in df_type_list %}
                            df_types.append("{{type}}")
                            {% endfor %}
                            
                            dataframe = np.array([[table_data[i][j] for j in range(int(length_columns))] for i in range(length_table)])
                            df = pd.DataFrame(dataframe,columns=table_columns)
                            df = df[df.columns[1:]]
                            df_prime = df
                            dtype_dict = {key: val for key, val in zip(df.columns, df_types)}
                            df = df.astype(dtype_dict)
                                </py-script>